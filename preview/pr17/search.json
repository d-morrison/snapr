[{"path":"https:/d-morrison.github.io/snapr/preview/pr17/LICENSE.html","id":null,"dir":"","previous_headings":"","what":"MIT License","title":"MIT License","text":"Copyright (c) 2025 snapr authors Permission hereby granted, free charge, person obtaining copy software associated documentation files (“Software”), deal Software without restriction, including without limitation rights use, copy, modify, merge, publish, distribute, sublicense, /sell copies Software, permit persons Software furnished , subject following conditions: copyright notice permission notice shall included copies substantial portions Software. SOFTWARE PROVIDED “”, WITHOUT WARRANTY KIND, EXPRESS IMPLIED, INCLUDING LIMITED WARRANTIES MERCHANTABILITY, FITNESS PARTICULAR PURPOSE NONINFRINGEMENT. EVENT SHALL AUTHORS COPYRIGHT HOLDERS LIABLE CLAIM, DAMAGES LIABILITY, WHETHER ACTION CONTRACT, TORT OTHERWISE, ARISING , CONNECTION SOFTWARE USE DEALINGS SOFTWARE.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"First Last. Author, maintainer.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Last F (2026). snapr: Package (One Line, Title Case). R package version 0.0.0.9000, https://github.com/d-morrison/snapr.","code":"@Manual{,   title = {snapr: What the Package Does (One Line, Title Case)},   author = {First Last},   year = {2026},   note = {R package version 0.0.0.9000},   url = {https://github.com/d-morrison/snapr}, }"},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"repository-overview","dir":"","previous_headings":"","what":"Repository Overview","title":"Copilot Instructions for snapr","text":"snapr R package estimating infection rates serological data. translates antibody levels measured cross-sectional population samples estimates frequency seroconversions (infections) occur sampled populations. package replaces previous seroincidence package. Type: R package (statistical analysis) Size: ~43MB, ~393 files, ~84 R source files, ~5,178 lines R code Language: R (>= 4.1.0) Key Dependencies: Rcpp, dplyr, ggplot2, tidyr, cli, foreach, doParallel Lifecycle: Stable","code":""},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"copilot-setup-workflow-automatic-environment-configuration","dir":"","previous_headings":"Critical Setup Requirements","what":"Copilot Setup Workflow (Automatic Environment Configuration)","title":"Copilot Instructions for snapr","text":"repository includes .github/workflows/copilot-setup-steps.yml workflow automatically configures GitHub Copilot coding agent’s environment required dependencies. workflow runs automatically Copilot starts working task, ensuring consistent properly configured development environment.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"what-the-workflow-does","dir":"","previous_headings":"Critical Setup Requirements > Copilot Setup Workflow (Automatic Environment Configuration)","what":"What the Workflow Does","title":"Copilot Instructions for snapr","text":"copilot-setup-steps.yml workflow: Installs system dependencies: required Ubuntu packages R package development (libcurl, libssl, libxml2, graphics libraries, etc.) Sets R (>= 4.1.0): Installs R release version meets package’s minimum requirement Installs R package dependencies: Imports, Suggests, development dependencies DESCRIPTION Verifies installation: Runs comprehensive checks ensure R properly configured","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"when-it-runs","dir":"","previous_headings":"Critical Setup Requirements > Copilot Setup Workflow (Automatic Environment Configuration)","what":"When It Runs","title":"Copilot Instructions for snapr","text":"workflow runs following scenarios: Automatically Copilot: GitHub Copilot coding agent starts working task, uses workflow prepare environment workflow changes: .github/workflows/copilot-setup-steps.yml modified (via push pull request) Manual testing: Can triggered manually repository’s “Actions” tab using workflow_dispatch","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"integration-with-ci-workflows","dir":"","previous_headings":"Critical Setup Requirements > Copilot Setup Workflow (Automatic Environment Configuration)","what":"Integration with CI Workflows","title":"Copilot Instructions for snapr","text":"copilot-setup-steps.yml workflow complements replace CI workflows: Purpose: Configures Copilot agent’s environment development work, CI testing Scope: Runs ubuntu-latest , CI workflows test multiple platforms (Ubuntu, macOS, Windows) R versions (release, devel, oldrel-1) Alignment: Uses R setup approach R-CMD-check.yaml workflow, ensuring consistency Timeout: Limited 55 minutes (Copilot maximum 59 minutes)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"verification-steps","dir":"","previous_headings":"Critical Setup Requirements > Copilot Setup Workflow (Automatic Environment Configuration)","what":"Verification Steps","title":"Copilot Instructions for snapr","text":"workflow includes detailed verification logging: R version check: Ensures R >= 4.1.0 requirement met Package verification: Lists key installed packages (devtools, rcmdcheck, lintr, spelling, testthat)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"customization","dir":"","previous_headings":"Critical Setup Requirements > Copilot Setup Workflow (Automatic Environment Configuration)","what":"Customization","title":"Copilot Instructions for snapr","text":"need modify Copilot environment setup: Edit .github/workflows/copilot-setup-steps.yml Test changes pushing branch using workflow_dispatch Ensure job name remains copilot-setup-steps (required Copilot) Keep timeout 59 minutes Update documentation reflect significant changes","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"alternative-quick-start-with-docker","dir":"","previous_headings":"Critical Setup Requirements","what":"Alternative: Quick Start with Docker","title":"Copilot Instructions for snapr","text":"prefer manual Docker setup, can use rocker/verse Docker image includes R, RStudio, tidyverse, TeX, many common R packages pre-installed. use Docker:","code":"# Pull the rocker/verse image (includes R >= 4.1.0, tidyverse, devtools, and more) docker pull rocker/verse:latest  # Run container with repository mounted docker run -d \\   -v /home/runner/work/snapr/snapr:/workspace \\   -w /workspace \\   --name snapr-dev \\   rocker/verse:latest  # Execute commands in the container docker exec snapr-dev R -e \"devtools::install_dev_deps()\" docker exec snapr-dev R -e \"devtools::check()\"  # Or start an interactive R session docker exec -it snapr-dev R  # Clean up when done docker stop snapr-dev docker rm snapr-dev"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"manual-installation-if-not-using-devcontainer-or-docker","dir":"","previous_headings":"Critical Setup Requirements","what":"Manual Installation (if not using devcontainer or Docker)","title":"Copilot Instructions for snapr","text":"devcontainer Docker available prefer native installation, follow manual installation instructions .","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"r-installation-and-development-dependencies-required","dir":"","previous_headings":"Critical Setup Requirements","what":"R Installation and Development Dependencies (REQUIRED)","title":"Copilot Instructions for snapr","text":"ALWAYS install R development dependencies starting work pull request. ensures avoid issues caused missing dependencies environment misconfiguration development process.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"installing-r--410","dir":"","previous_headings":"Critical Setup Requirements > R Installation and Development Dependencies (REQUIRED)","what":"Installing R (>= 4.1.0)","title":"Copilot Instructions for snapr","text":"package requires R version 4.1.0 higher. Install R platform: Ubuntu/Linux: macOS: Windows: Download install https://cran.r-project.org/bin/windows/base/ Verify installation opening R console checking version:","code":"# Add CRAN repository for latest R version sudo apt-get update sudo apt-get install -y software-properties-common dirmngr wget -qO- https://cloud.r-project.org/bin/linux/ubuntu/pubkey.gpg | \\   sudo tee /etc/apt/trusted.gpg.d/cran_ubuntu_key.asc sudo add-apt-repository \\   \"deb https://cloud.r-project.org/bin/linux/ubuntu $(lsb_release -cs)-cran40/\" sudo apt-get update sudo apt-get install -y r-base r-base-dev  # Verify installation R --version # Install using Homebrew (recommended) brew install r  # Or download from CRAN: https://cran.r-project.org/bin/macosx/ # Verify installation R --version R.version.string"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"installing-development-dependencies","dir":"","previous_headings":"Critical Setup Requirements > R Installation and Development Dependencies (REQUIRED)","what":"Installing Development Dependencies","title":"Copilot Instructions for snapr","text":"installing R, install required development dependencies: Alternative approach using pak (faster parallel installation):","code":"# Install devtools (required for package development) install.packages(\"devtools\", repos = \"https://cloud.r-project.org\")  # Install all package dependencies (Imports, Suggests, and development needs) # This reads DESCRIPTION file and installs everything needed devtools::install_dev_deps(dependencies = TRUE) install.packages(\"pak\", repos = \"https://cloud.r-project.org\") pak::local_install_dev_deps(dependencies = TRUE)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"verify-development-environment","dir":"","previous_headings":"Critical Setup Requirements > R Installation and Development Dependencies (REQUIRED)","what":"Verify Development Environment","title":"Copilot Instructions for snapr","text":"installation, verify development environment properly configured: Note: encounter issues dependencies, particularly system libraries, install following system dependencies first: Ubuntu/Linux: macOS: system dependencies handled Homebrew, may need: Windows: Install Rtools https://cran.r-project.org/bin/windows/Rtools/ (choose version matching R version)","code":"# Load devtools library(devtools)  # Check package dependencies devtools::dev_sitrep()  # Load the package in development mode devtools::load_all()  # Run a quick check devtools::check_man() sudo apt-get install -y \\   libcurl4-openssl-dev \\   libssl-dev \\   libxml2-dev \\   libfontconfig1-dev \\   libharfbuzz-dev \\   libfribidi-dev \\   libfreetype6-dev \\   libpng-dev \\   libtiff5-dev \\   libjpeg-dev brew install pkg-config cairo"},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"initial-setup","dir":"","previous_headings":"Build and Development Workflow","what":"Initial Setup","title":"Copilot Instructions for snapr","text":"","code":"# Install development dependencies devtools::install_dev_deps()  # Or using the package manager approach install.packages(\"devtools\")"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"documentation-generation","dir":"","previous_headings":"Build and Development Workflow","what":"Documentation Generation","title":"Copilot Instructions for snapr","text":"ALWAYS regenerate documentation modifying roxygen2 comments .R files. Documentation files man/ NAMESPACE auto-generated. edit directly.","code":"# Generate documentation from roxygen2 comments devtools::document() # or roxygen2::roxygenise()"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"readme-updates","dir":"","previous_headings":"Build and Development Workflow","what":"README Updates","title":"Copilot Instructions for snapr","text":"README.md generated README.Rmd. ALWAYS edit README.Rmd, never README.md directly. regenerate:","code":"rmarkdown::render(\"README.Rmd\")"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"package-checking","dir":"","previous_headings":"Build and Development Workflow","what":"Package Checking","title":"Copilot Instructions for snapr","text":"Run R CMD check validate package: Note: runs multiple validation steps including examples, tests, documentation checks. Allow 5-10 minutes completion.","code":"# Full package check (takes several minutes) devtools::check() # or rcmdcheck::rcmdcheck(error_on = \"note\")"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"testing","dir":"","previous_headings":"Build and Development Workflow","what":"Testing","title":"Copilot Instructions for snapr","text":"Tests located tests/testthat/. package uses testthat 3.0+ snapshot testing validation.","code":"# Run all tests devtools::test() # or testthat::test_local(stop_on_warning = TRUE, stop_on_error = TRUE)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"linting","dir":"","previous_headings":"Build and Development Workflow","what":"Linting","title":"Copilot Instructions for snapr","text":"package uses custom lintr configuration (.lintr) specific requirements: Key linting rules: - Use native pipe |> (configured .lintr) - Follow snake_case naming conventions - Avoid trailing whitespace - Ensure consistent code style Exclusions: vignettes may exempt specific linters (see .lintr configuration).","code":"# Lint the entire package lintr::lint_package()  # Lint specific file lintr::lint(\"R/filename.R\")"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"spelling-check","dir":"","previous_headings":"Build and Development Workflow","what":"Spelling Check","title":"Copilot Instructions for snapr","text":"Custom words inst/WORDLIST (exists).","code":"# Check spelling spelling::spell_check_package()"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"continuous-integration-ci-checks","dir":"","previous_headings":"","what":"Continuous Integration (CI) Checks","title":"Copilot Instructions for snapr","text":"following workflows run every PR. must pass merge: R-CMD-check.yaml: Runs R CMD check Ubuntu (release, devel, oldrel-1), macOS (release), Windows (release). Fails NOTE. (~10-15 min) lint-changed-files.yaml: Lints files changed PR using lintr custom .lintr config. Fails lints found. (~2-3 min) test-coverage.yaml: Runs macOS, generates code coverage via covr, uploads Codecov. (~5-10 min) check-spelling.yaml: Spell checks using spelling package. (~1-2 min) check-readme.yaml: Renders README.Rmd verifies matches README.md. (~2-3 min) R-check-docs.yml: Runs roxygen2::roxygenise() checks man/, NAMESPACE, DESCRIPTION changed. Fails documentation sync. (~2-3 min) news.yaml: Ensures NEWS.md updated every PR. Can bypassed -changelog label. (~1 min) version-check.yaml: Verifies DESCRIPTION version number increased vs. main branch. Run usethis::use_version() increment. (~1 min) pkgdown.yaml: Builds pkgdown website PR (preview), tags, main branch pushes. Requires Quarto setup. (~5-7 min) copilot-setup-steps.yml: Configures GitHub Copilot coding agent’s environment automatically. Runs Copilot starts work, workflow file changes, via manual dispatch. required check PR merges. See “Copilot Setup Workflow” section details. (~5-10 min)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"pr-commands","dir":"","previous_headings":"Continuous Integration (CI) Checks","what":"PR Commands","title":"Copilot Instructions for snapr","text":"Team members can trigger actions commenting PRs: - /document - Runs roxygen2::roxygenise() commits changes - /style - Runs styler::style_pkg() commits changes","code":""},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"key-directories","dir":"","previous_headings":"Repository Structure","what":"Key Directories","title":"Copilot Instructions for snapr","text":"R/: Package source code (84 R files, ~5,178 lines) Main functions serological calculations Statistical models estimators Data processing validation Plotting visualization functions snapr-package.R: Package documentation tests/testthat/: Unit tests Uses snapshot testing _snaps/ subdirectory Tests seed RNG reproducibility man/: Auto-generated documentation - EDIT data/: Package datasets Example serological datasets data-raw/: Raw data processing scripts (included package build) inst/: Installed files Additional package resources inst/WORDLIST: Custom spelling dictionary (exists) vignettes/: Package vignettes Documentation articles Usage examples pkgdown/: pkgdown website configuration _pkgdown.yml: Site structure, reference organization src/: C++ source code (Rcpp integration) Compiled code performance-critical functions","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"configuration-files","dir":"","previous_headings":"Repository Structure","what":"Configuration Files","title":"Copilot Instructions for snapr","text":"DESCRIPTION: Package metadata, dependencies, version NAMESPACE: Auto-generated exports - EDIT .lintr: Custom lintr configuration .Rprofile: Interactive session setup (exists) .Rbuildignore: Files excluded package build snapr.Rproj: RStudio project settings **_quarto.yml**: Quarto rendering configuration vignettes codecov.yml: Code coverage thresholds .gitignore: Git exclusions","code":""},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"documentation-out-of-sync","dir":"","previous_headings":"Common Issues and Workarounds","what":"Documentation Out of Sync","title":"Copilot Instructions for snapr","text":"Symptom: R-check-docs.yml workflow fails. Solution: Run devtools::document() locally commit updated man/ NAMESPACE files.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"version-not-incremented","dir":"","previous_headings":"Common Issues and Workarounds","what":"Version Not Incremented","title":"Copilot Instructions for snapr","text":"Symptom: version-check.yaml workflow fails. Solution: Run usethis::use_version() increment version DESCRIPTION.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"newsmd-not-updated","dir":"","previous_headings":"Common Issues and Workarounds","what":"NEWS.md Not Updated","title":"Copilot Instructions for snapr","text":"Symptom: news.yaml workflow fails. Solution: Add bullet point NEWS.md development version header, add -changelog label PR change doesn’t warrant NEWS entry.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"linting-failures","dir":"","previous_headings":"Common Issues and Workarounds","what":"Linting Failures","title":"Copilot Instructions for snapr","text":"Symptom: lint-changed-files.yaml fails. Solution: Review .lintr custom rules. Common issues: - Wrong pipe operator (use |> %>%) - Trailing whitespace - Code style inconsistencies","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"compilation-issues-c-code","dir":"","previous_headings":"Common Issues and Workarounds","what":"Compilation Issues (C++ code)","title":"Copilot Instructions for snapr","text":"Symptom: Package build fails Rcpp errors. Solution: Ensure proper C++ compiler: - Linux: Install build-essential r-base-dev - macOS: Install Xcode command line tools: xcode-select --install - Windows: Install Rtools matching R version","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"testing-requirements-before-code-changes","dir":"","previous_headings":"","what":"Testing Requirements Before Code Changes","title":"Copilot Instructions for snapr","text":"ALWAYS establish value-based unit tests modifying functions. ensures changes preserve existing behavior new behavior correctly validated.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"testing-strategy","dir":"","previous_headings":"Testing Requirements Before Code Changes","what":"Testing Strategy","title":"Copilot Instructions for snapr","text":"Choose appropriate testing approach based context:","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"when-to-use-snapshot-tests","dir":"","previous_headings":"Testing Requirements Before Code Changes > Testing Strategy","what":"When to Use Snapshot Tests","title":"Copilot Instructions for snapr","text":"Use snapshot tests (expect_snapshot(), expect_snapshot_value(), expect_snapshot_data()) : - Testing complex data structures (data.frames, lists, model outputs) - Validating statistical results - Output format stability important - exact values less important structural consistency Examples:","code":"# For data frames with numeric precision control dataset |> expect_snapshot_data(name = \"test-data\")  # For R objects with serialization results |> expect_snapshot_value(style = \"serialize\")  # For simple output or error messages output <- calculate_rates(data) |> expect_no_error() testthat::expect_snapshot(output)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"when-to-use-explicit-value-tests","dir":"","previous_headings":"Testing Requirements Before Code Changes > Testing Strategy","what":"When to Use Explicit Value Tests","title":"Copilot Instructions for snapr","text":"Use explicit value tests (expect_equal(), expect_identical(), etc.) : - Testing simple scalar outputs - Validating specific numeric thresholds boundaries - Testing Boolean returns categorical outputs - Exact values critical correctness Examples:","code":"# Testing exact numeric values expect_equal(calculate_mean(c(1, 2, 3)), 2)  # Testing with tolerance for floating point expect_equal(calculate_ratio(3, 7), 0.4285714, tolerance = 1e-6)  # Testing logical conditions expect_true(is_valid_input(data)) expect_false(has_missing_values(complete_data))"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"testing-best-practices","dir":"","previous_headings":"Testing Requirements Before Code Changes > Testing Strategy","what":"Testing Best Practices","title":"Copilot Instructions for snapr","text":"Seed randomness: Use withr::local_seed() withr::with_seed() reproducible tests involving random number generation Use small test cases: Keep tests fast using minimal data Platform-specific snapshots: Use variant parameter snapshot functions output differs OS Test fixtures: Store complex test data tests/testthat/fixtures/ reuse","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"test-driven-workflow","dir":"","previous_headings":"Testing Requirements Before Code Changes","what":"Test-Driven Workflow","title":"Copilot Instructions for snapr","text":"modifying function: Write verify existing tests capture current behavior Add new tests: Create tests new functionality ’re adding Make changes: Modify function implementation Run tests: Validate tests pass, updating snapshots changes intentional Review snapshots: snapshots change, review diff ensure changes expected","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"code-style-guidelines","dir":"","previous_headings":"","what":"Code Style Guidelines","title":"Copilot Instructions for snapr","text":"Follow tidyverse style guide: https://style.tidyverse.org Use native pipe: |> %>% Naming: snake_case, acronyms may uppercase (e.g., prep_IDs_data) Messaging: Use cli::cli_*() functions user-facing messages library() package code: Use :: DESCRIPTION Imports Document exports: Use roxygen2 (@title, @description, @param, @returns, @examples) Test snapshot changes: Use appropriate snapshot testing approaches Seed tests: Use withr::local_seed() reproducible tests Avoid code duplication: Don’t copy-paste substantial code chunks. Instead, decompose reusable logic well-named helper functions Quarto vignettes: Use Quarto-style chunk options #| prefix (e.g., #| label: -chunk, #| eval: false) Tidyverse replacements: Use tidyverse/modern replacements base R functions available Write tidy code: Keep code clean, readable, well-organized","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"package-development-commands-summary","dir":"","previous_headings":"","what":"Package Development Commands Summary","title":"Copilot Instructions for snapr","text":"","code":"# Complete development workflow devtools::load_all()           # Load package for interactive testing devtools::document()           # Update documentation devtools::test()               # Run tests devtools::check()              # Full R CMD check (slow) usethis::use_version()         # Increment version lintr::lint_package()          # Check code style spelling::spell_check_package() # Check spelling rmarkdown::render(\"README.Rmd\") # Update README"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/copilot-instructions.html","id":"trust-these-instructions","dir":"","previous_headings":"","what":"Trust These Instructions","title":"Copilot Instructions for snapr","text":"instructions validated actual repository structure, workflows, configuration files. making changes: ALWAYS install R (>= 4.1.0) development dependencies starting work PR ALWAYS establish value-based unit tests (snapshot explicit value tests) modifying functions ALWAYS write tidy, clean, well-organized code ALWAYS run devtools::document() modifying roxygen2 comments ALWAYS edit README.Rmd (README.md) README changes ALWAYS increment dev version number one ahead main branch requesting PR review ALWAYS update NEWS.md user-facing changes ALWAYS run tests committing (devtools::test()) ALWAYS check fix lintr issues changed files PRs committing ALWAYS run devtools::document() requesting PR review ALWAYS make sure devtools::check() passes requesting PR review ALWAYS make sure devtools::spell_check() passes requesting PR review ALWAYS run pkgdown::build_site() requesting PR review ensure pkgdown site builds successfully ALWAYS verify Quarto documents render successfully locally - don’t rely CI workflows pkgdown::build_site() errors related Quarto, use quarto::quarto_render(input = \"path//file.qmd\", quiet = FALSE) debug search additional information instructions incomplete incorrect specific task.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/index.html","id":"snapr","dir":"","previous_headings":"","what":"What the Package Does (One Line, Title Case)","title":"What the Package Does (One Line, Title Case)","text":"goal snapr provide convenient snapshot testing functions R packages: expect_snapshot_data() - data.frames (adapted permission {ssdtools} package) expect_snapshot_object() - generalizes expect_snapshot_data() use R object","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/index.html","id":"installation","dir":"","previous_headings":"","what":"Installation","title":"What the Package Does (One Line, Title Case)","text":"can install development version snapr GitHub :","code":"# install.packages(\"pak\") pak::pak(\"d-morrison/snapr\")"},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/index.html","id":"snapshot-dataframes","dir":"","previous_headings":"Examples","what":"Snapshot data.frames","title":"What the Package Does (One Line, Title Case)","text":"","code":"library(snapr)  # In a testthat test file: test_that(\"iris data is correct\", {   expect_snapshot_data(iris[1:5, ], name = \"iris_sample\") })"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/index.html","id":"snapshot-any-r-object","dir":"","previous_headings":"Examples","what":"Snapshot any R object","title":"What the Package Does (One Line, Title Case)","text":"","code":"library(snapr)  # Snapshot a list (RDS format by default - works for any R object) test_that(\"config object is correct\", {   config <- list(     name = \"my_app\",     version = \"1.0.0\",     settings = list(debug = TRUE, timeout = 30)   )   expect_snapshot_object(config, name = \"config\") })  # Snapshot with JSON format for human-readable diffs test_that(\"simple data is correct\", {   data <- list(x = 1:5, y = letters[1:5])   expect_snapshot_object(data, name = \"simple_data\", writer = save_json) })  # Snapshot a model (use RDS for complex objects) test_that(\"model structure is correct\", {   model <- lm(mpg ~ wt, data = mtcars)   expect_snapshot_object(model, name = \"model\") })"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/compare_file_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Compare RDS files using diffobj for better snapshot review — compare_file_object","title":"Compare RDS files using diffobj for better snapshot review — compare_file_object","text":"comparison function loads RDS files compares deserialized R objects rather raw bytes. enables better visualization snapshot_review() comparing actual object structure rather binary serialization. meaningful diffs testthat's snapshot_review(), uses diffobj internally, function compares R objects deserialization.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/compare_file_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Compare RDS files using diffobj for better snapshot review — compare_file_object","text":"","code":"compare_file_object(old, new)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/compare_file_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Compare RDS files using diffobj for better snapshot review — compare_file_object","text":"old Path old (reference) RDS file new Path new RDS file compare","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/compare_file_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Compare RDS files using diffobj for better snapshot review — compare_file_object","text":"logical TRUE objects identical, FALSE otherwise","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/compare_file_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Compare RDS files using diffobj for better snapshot review — compare_file_object","text":"","code":"if (FALSE) { # \\dontrun{ # This is used internally by expect_snapshot_object # when comparing RDS files old_obj <- list(a = 1, b = 2) new_obj <- list(a = 1, b = 3) old_path <- tempfile(fileext = \".rds\") new_path <- tempfile(fileext = \".rds\") saveRDS(old_obj, old_path) saveRDS(new_obj, new_path) compare_file_object(old_path, new_path) } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/darwin_variant.html","id":null,"dir":"Reference","previous_headings":"","what":"Get darwin snapshot variant for macOS — darwin_variant","title":"Get darwin snapshot variant for macOS — darwin_variant","text":"Returns \"darwin\" macOS, NULL platforms (Linux/Windows).","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/darwin_variant.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get darwin snapshot variant for macOS — darwin_variant","text":"","code":"darwin_variant()"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/darwin_variant.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get darwin snapshot variant for macOS — darwin_variant","text":"\"darwin\" macOS, NULL platforms","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/darwin_variant.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get darwin snapshot variant for macOS — darwin_variant","text":"specialized variant function cases macOS produces different results Linux Windows identical. Use instead system_os() : macOS produces unique output (e.g., platform-specific math libraries) Linux Windows produce identical results want maintain single snapshot Linux/Windows Common use cases: JAGS MCMC output (macOS uses different floating-point arithmetic) Platform-specific numerical computations","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/darwin_variant.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get darwin snapshot variant for macOS — darwin_variant","text":"","code":"if (FALSE) { # \\dontrun{ # Use with expect_snapshot_file when only macOS differs expect_snapshot_object(   mcmc_result, name = \"test\", variant = darwin_variant() ) } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_data.html","id":null,"dir":"Reference","previous_headings":"","what":"Snapshot testing for data.frames — expect_snapshot_data","title":"Snapshot testing for data.frames — expect_snapshot_data","text":"copied https://github.com/bcgov/ssdtools permission (https://github.com/bcgov/ssdtools/issues/379)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_data.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Snapshot testing for data.frames — expect_snapshot_data","text":"","code":"expect_snapshot_data(x, name, digits = 6, ...)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_data.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Snapshot testing for data.frames — expect_snapshot_data","text":"x data.frame snapshot name character snapshot name digits integer passed signif() numeric variables ... Arguments passed testthat::expect_snapshot_file binary Please use compare argument instead. cran expectations verified CRAN? default, , snapshot tests tend fragile often rely minor details dependencies. transform Optionally, function scrub sensitive stochastic text output. take character vector lines input return modified character vector output. variant -NULL, results saved _snaps/{variant}/{test}/{name}. allows create different snapshots different scenarios, like different operating systems different R versions. Note way declare possible variants front means soon start using variants, responsible deleting snapshot variants longer used. (testthat still delete variants delete test.)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_data.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Snapshot testing for data.frames — expect_snapshot_data","text":"NULL (testthat::expect_snapshot_file())","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_data.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Snapshot testing for data.frames — expect_snapshot_data","text":"","code":"if (FALSE) { # \\dontrun{ expect_snapshot_data(iris, name = \"iris\") } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":null,"dir":"Reference","previous_headings":"","what":"Snapshot testing for R objects — expect_snapshot_object","title":"Snapshot testing for R objects — expect_snapshot_object","text":"flexible wrapper around testthat::expect_snapshot_file() allows snapshotting R object, just data.frames. function provides convenient interface snapshot testing sensible defaults serialization. using RDS format (default), snapshots compared using diffobj::diffObj() provides rich, visual diffs testthat::snapshot_review(). makes much easier review changes complex R objects.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Snapshot testing for R objects — expect_snapshot_object","text":"","code":"expect_snapshot_object(x, name, writer = save_rds, ...)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Snapshot testing for R objects — expect_snapshot_object","text":"x R object snapshot. Can R object including lists, models, data.frames, vectors, etc. name character snapshot name (file extension added automatically) writer function Function write object file. Default save_rds(). options include save_json(), save_deparse(), save_csv(), save_diffobj(). Custom writer functions accept x return file path. ... Arguments passed testthat::expect_snapshot_file binary Please use compare argument instead. cran expectations verified CRAN? default, , snapshot tests tend fragile often rely minor details dependencies. compare function used compare snapshot files. take two inputs, paths old new snapshot, return either TRUE FALSE. defaults compare_file_text name extension .r, .R, .Rmd, .md, .txt, otherwise uses compare_file_binary. compare_file_binary() compares byte--byte compare_file_text() compares lines--line, ignoring difference Windows Mac/Linux line endings. transform Optionally, function scrub sensitive stochastic text output. take character vector lines input return modified character vector output. variant -NULL, results saved _snaps/{variant}/{test}/{name}. allows create different snapshots different scenarios, like different operating systems different R versions. Note way declare possible variants front means soon start using variants, responsible deleting snapshot variants longer used. (testthat still delete variants delete test.)","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Snapshot testing for R objects — expect_snapshot_object","text":"NULL (testthat::expect_snapshot_file())","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Snapshot testing for R objects — expect_snapshot_object","text":"using RDS format (default), snapshots can vary across R versions platforms even fixed serialization versions. Consider using variant = platform_variant() RDS snapshots handle differences, use text-based formats like JSON deparse stable snapshots across platforms versions. RDS comparison uses diffobj::diffObj() internally, provides rich visual diffs testthat::snapshot_review(). particularly useful complex objects like models, nested lists, data structures byte-level comparison difficult interpret.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/expect_snapshot_object.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Snapshot testing for R objects — expect_snapshot_object","text":"","code":"if (FALSE) { # \\dontrun{ # Snapshot a list (using RDS format with platform/version variant) expect_snapshot_object(   list(a = 1, b = 2), name = \"config\", variant = platform_variant() )  # Snapshot a model model <- lm(mpg ~ wt, data = mtcars) expect_snapshot_object(   model, name = \"model\", variant = platform_variant() )  # Snapshot with JSON format (for human-readable diffs) # Text formats don't need variants expect_snapshot_object(iris[1:5, ], name = \"iris\", writer = save_json)  # Snapshot with deparse format expect_snapshot_object(   list(x = 1:5), name = \"simple_list\", writer = save_deparse )  # Snapshot with str() format (optimal for diffobj visualization) expect_snapshot_object(   list(a = 1:5, b = letters[1:3]), name = \"complex_list\",   writer = save_diffobj ) } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/platform_variant.html","id":null,"dir":"Reference","previous_headings":"","what":"Get platform variant including OS and R version — platform_variant","title":"Get platform variant including OS and R version — platform_variant","text":"Returns variant string combining OS R major.minor version. useful RDS snapshots vary platform R version.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/platform_variant.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get platform variant including OS and R version — platform_variant","text":"","code":"platform_variant()"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/platform_variant.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get platform variant including OS and R version — platform_variant","text":"character string like \"linux-4.4\", \"darwin-4.5\", \"windows-4.4\"","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/platform_variant.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get platform variant including OS and R version — platform_variant","text":"RDS files can produce different binary output across R versions even using serialization version. function creates variant strings like \"linux-4.4\", \"darwin-4.5\", \"windows-4.4\" handle differences. Use function testthat::expect_snapshot_file() testing RDS files formats vary OS R version.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/platform_variant.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get platform variant including OS and R version — platform_variant","text":"","code":"if (FALSE) { # \\dontrun{ # Use with expect_snapshot_file for RDS snapshots expect_snapshot_object(   my_object, name = \"test\", variant = platform_variant() ) } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_csv.html","id":null,"dir":"Reference","previous_headings":"","what":"Save a data.frame to a CSV file — save_csv","title":"Save a data.frame to a CSV file — save_csv","text":"Save data.frame CSV file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_csv.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save a data.frame to a CSV file — save_csv","text":"","code":"save_csv(x)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_csv.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save a data.frame to a CSV file — save_csv","text":"x data.frame save","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_csv.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save a data.frame to a CSV file — save_csv","text":"character Path temporary CSV file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_deparse.html","id":null,"dir":"Reference","previous_headings":"","what":"Save an R object to a text file using deparse — save_deparse","title":"Save an R object to a text file using deparse — save_deparse","text":"Save R object text file using deparse","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_deparse.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save an R object to a text file using deparse — save_deparse","text":"","code":"save_deparse(x)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_deparse.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save an R object to a text file using deparse — save_deparse","text":"x R object save","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_deparse.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save an R object to a text file using deparse — save_deparse","text":"character Path temporary text file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_diffobj.html","id":null,"dir":"Reference","previous_headings":"","what":"Save an R object using diffobj-friendly format — save_diffobj","title":"Save an R object using diffobj-friendly format — save_diffobj","text":"Saves R object text format optimized visualization diffobj testthat's snapshot_review(). uses combination str() output provides hierarchical view object structure.","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_diffobj.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save an R object using diffobj-friendly format — save_diffobj","text":"","code":"save_diffobj(x)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_diffobj.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save an R object using diffobj-friendly format — save_diffobj","text":"x R object save","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_diffobj.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save an R object using diffobj-friendly format — save_diffobj","text":"character Path temporary text file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_diffobj.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Save an R object using diffobj-friendly format — save_diffobj","text":"","code":"if (FALSE) { # \\dontrun{ obj <- list(a = 1:5, b = letters[1:3], c = list(x = 1, y = 2)) path <- save_diffobj(obj) cat(readLines(path), sep = \"\\n\") } # }"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_json.html","id":null,"dir":"Reference","previous_headings":"","what":"Save an R object to a JSON file — save_json","title":"Save an R object to a JSON file — save_json","text":"Save R object JSON file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_json.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save an R object to a JSON file — save_json","text":"","code":"save_json(x)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_json.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save an R object to a JSON file — save_json","text":"x R object save","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_json.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save an R object to a JSON file — save_json","text":"character Path temporary JSON file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_rds.html","id":null,"dir":"Reference","previous_headings":"","what":"Save an R object to an RDS file — save_rds","title":"Save an R object to an RDS file — save_rds","text":"Save R object RDS file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_rds.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Save an R object to an RDS file — save_rds","text":"","code":"save_rds(x)"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_rds.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Save an R object to an RDS file — save_rds","text":"x R object save","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/save_rds.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Save an R object to an RDS file — save_rds","text":"character Path temporary RDS file","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/snapr-package.html","id":null,"dir":"Reference","previous_headings":"","what":"snapr: What the Package Does (One Line, Title Case) — snapr-package","title":"snapr: What the Package Does (One Line, Title Case) — snapr-package","text":"package (one paragraph).","code":""},{"path":[]},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/snapr-package.html","id":"author","dir":"Reference","previous_headings":"","what":"Author","title":"snapr: What the Package Does (One Line, Title Case) — snapr-package","text":"Maintainer: First Last first.last@example.com","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/system_os.html","id":null,"dir":"Reference","previous_headings":"","what":"Get the current operating system — system_os","title":"Get the current operating system — system_os","text":"Returns name current operating system lowercase. simple wrapper around Sys.info()[[\"sysname\"]].","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/system_os.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Get the current operating system — system_os","text":"","code":"system_os()"},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/system_os.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Get the current operating system — system_os","text":"character string: \"linux\", \"darwin\" (macOS), \"windows\"","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/system_os.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Get the current operating system — system_os","text":"function used testthat's variant parameter testthat::expect_snapshot_file() create OS-specific snapshots file formats produce different output across platforms. Common use cases: RDS files: Binary serialization format can differ across OS Platform-specific numeric computations (e.g., MCMC algorithms) Files platform-specific line endings encodings","code":""},{"path":"https:/d-morrison.github.io/snapr/preview/pr17/reference/system_os.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Get the current operating system — system_os","text":"","code":"if (FALSE) { # \\dontrun{ # Use with expect_snapshot_file for OS-specific snapshots expect_snapshot_object(my_object, name = \"test\", variant = system_os()) } # }"}]
